"use strict";(self.webpackChunkwiznet_document=self.webpackChunkwiznet_document||[]).push([[5570],{36096:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>d,toc:()=>o});var i=n(85893),s=n(11151);const l={id:"aws-connection-guide",title:"AWS Connection Guide",date:new Date("2021-05-21T00:00:00.000Z")},r=void 0,d={id:"Product/S2E-Module/WIZ510SSL/aws-connection-guide",title:"AWS Connection Guide",description:"Getting Started",source:"@site/docs/Product/S2E-Module/WIZ510SSL/AWS-Connection-Guide-EN.md",sourceDirName:"Product/S2E-Module/WIZ510SSL",slug:"/Product/S2E-Module/WIZ510SSL/aws-connection-guide",permalink:"/Product/S2E-Module/WIZ510SSL/aws-connection-guide",draft:!1,unlisted:!1,editUrl:"https://github.com/Wiznet/document_framework/tree/master/docs/Product/S2E-Module/WIZ510SSL/AWS-Connection-Guide-EN.md",tags:[],version:"current",frontMatter:{id:"aws-connection-guide",title:"AWS Connection Guide",date:"2021-05-21T00:00:00.000Z"}},c={},o=[{value:"Getting Started",id:"getting-started",level:2},{value:"Hardware Requirement",id:"hardware-requirement",level:3},{value:"Software Requirement",id:"software-requirement",level:3},{value:"Introduction",id:"introduction",level:2},{value:"Device preparation",id:"device-preparation",level:2},{value:"Device connection",id:"device-connection",level:3},{value:"Configuration Description",id:"configuration-description",level:2},{value:"1. Configuration using AT commands",id:"1-configuration-using-at-commands",level:3},{value:"2. Configuration using Config Tool",id:"2-configuration-using-config-tool",level:3},{value:"Results",id:"results",level:2}];function a(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components},{Details:l}=t;return l||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,i.jsx)(t.h3,{id:"hardware-requirement",children:"Hardware Requirement"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Desktop or laptop computer"}),"\n",(0,i.jsx)(t.li,{children:"MicroUSB cable"}),"\n",(0,i.jsx)(t.li,{children:"LAN cable"}),"\n",(0,i.jsx)(t.li,{children:"WIZ510SSL"}),"\n",(0,i.jsx)(t.li,{children:"WIZ510SSL-EVB"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"software-requirement",children:"Software Requirement"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Preferred Serial Terminal (TeraTerm, YAT, etc.)"}),"\n",(0,i.jsx)(t.li,{children:"AWS Console account"}),"\n"]}),"\n",(0,i.jsxs)(l,{open:!0,children:[(0,i.jsx)("summary",{children:" AWS IoT Core preparation before start"}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://aws.amazon.com/ko/console/",children:(0,i.jsx)(t.strong,{children:"Sign to console"})})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://docs.aws.amazon.com/iot/latest/developerguide/create-iot-resources.html#create-aws-thing",children:(0,i.jsx)(t.strong,{children:"Create a thing"})})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://docs.aws.amazon.com/iot/latest/developerguide/create-iot-resources.html#create-iot-policy",children:(0,i.jsx)(t.strong,{children:"Create a policy"})})}),"\n"]}),(0,i.jsx)(t.admonition,{type:"important",children:(0,i.jsxs)(t.p,{children:["Save certificates and key during creation.\n",(0,i.jsx)(t.img,{src:n(53321).Z+"",width:"982",height:"674"}),"\nAWS root CA can be downloaded from ",(0,i.jsx)(t.a,{href:"https://docs.aws.amazon.com/iot/latest/developerguide/server-authentication.html#server-authentication-certs",children:(0,i.jsx)(t.strong,{children:"here"})})]})})]}),"\n",(0,i.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsxs)(t.p,{children:["AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud.\nIt is possible to connect to AWS via ",(0,i.jsx)(t.strong,{children:"WIZ510SSL"})," and send data using MQTTS."]}),"\n",(0,i.jsx)(t.p,{children:"In this document we will provide guide how to connect to AWS services.\nProcess consists of following steps:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Creation of AWS account"}),"\n",(0,i.jsx)(t.li,{children:"Creation & configuration of Thing in IoT Core"}),"\n",(0,i.jsx)(t.li,{children:"Connection & Message transfer"}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["For this guide we used evaluation board ",(0,i.jsx)(t.strong,{children:"WIZ510SSL-EVB"})]}),"\n",(0,i.jsx)(t.h2,{id:"device-preparation",children:"Device preparation"}),"\n",(0,i.jsx)(t.h3,{id:"device-connection",children:"Device connection"}),"\n",(0,i.jsx)(t.p,{children:"Please check COM port number in Device Manager."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(71105).Z+"",width:"549",height:"280"})}),"\n",(0,i.jsxs)(t.admonition,{type:"tip",children:[(0,i.jsx)(t.p,{children:"If COM port cannot be found in Device Manager, please install drivers below."}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers",children:"Silicon Labs CP210x USB to UART Driver"})}),"\n"]})]}),"\n",(0,i.jsx)(t.h2,{id:"configuration-description",children:"Configuration Description"}),"\n",(0,i.jsx)(t.p,{children:"There are two ways how to configure WIZ510SSL: using ConfigTool and using AT Commands."}),"\n",(0,i.jsx)(t.h3,{id:"1-configuration-using-at-commands",children:"1. Configuration using AT commands"}),"\n",(0,i.jsx)(t.p,{children:"Please refer to [Command Manual] to find information about all AT Commands.\nBelow we will describe commands created for AWS connection."}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Command"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Remark"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Set network configuration to DHCP"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"IM1"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Set operation mode to MQTTS client"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"OP6"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Set remote host"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"RH<parameter>"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Use AWS endpoint"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Set remote port to 8883"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"RP8883"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Set packing time"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"PT500"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"500 is given as example"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Set Client ID"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"QC<parameter>"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Use Thing name"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Set Public Topic"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"PU<parameter>"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"$aws/things/<Thing Name>/shadow/update"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Set Subscribe Topic"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"U0<parameter>"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"$aws/things/<Thing Name>/shadow/update/accepted"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Set MQTT Keep Alive time"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"QK60"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"60 is given as example"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Set Root CA option"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"RC2"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"2 - required"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Enable Client Certificate"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"CE1"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"1 - enabled"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Save Root CA"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"OC"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Save Client certificate"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"LC"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Save Private Key"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"PK"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Save settings"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"SV"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Reboot device"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"RT"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,i.jsx)(t.p,{children:"Please note that WIZ510SSL supports multiple command setup.\nIt is possible to make above settings as following:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-cpp",children:'IM1\\r\\nOP6\\r\\nPT500\\r\\nQC"Thing Name"\\r\\nRH"End Point".amazonaws.com\\r\\nRP8883\\r\\nPU$aws/things/"Thing Name"/shadow/update\\r\\nU0$aws/things/"Thing Name"/shadow/update/accepted\\r\\nQK60\\r\\nRC2\\r\\nCE1\\r\\n\n'})}),"\n",(0,i.jsx)(t.p,{children:"To save Root CA, Client Certificate or Private Key we used YAT file transfer function."}),"\n",(0,i.jsx)(t.p,{children:"First, add appropriate command name in the beginning of the file."}),"\n",(0,i.jsx)(t.p,{children:"Refer to below example:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(92460).Z+"",width:"1075",height:"679"})}),"\n",(0,i.jsx)(t.p,{children:"Use following EOL settings:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(37739).Z+"",width:"462",height:"561"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Each certificate shall be sent separately."})}),"\n",(0,i.jsx)(t.p,{children:"It is necessary to save settings and reboot device."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-cpp",children:"SV\\r\\nRT\\r\\n\n"})}),"\n",(0,i.jsx)(t.h3,{id:"2-configuration-using-config-tool",children:"2. Configuration using Config Tool"}),"\n",(0,i.jsx)(t.p,{children:"Please refer to [Config Tool Manual] to find detail information about Config Tool.\nBelow we will show configuration required for AWS connection."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Step 1."})}),"\n",(0,i.jsxs)(t.p,{children:["Setup DHCP select following:\n",(0,i.jsx)(t.img,{src:n(94287).Z+"",width:"1082",height:"386"})]}),"\n",(0,i.jsxs)(t.p,{children:["Make settings in MQTT Options tab:\n",(0,i.jsx)(t.img,{src:n(79321).Z+"",width:"1349",height:"1077"})]}),"\n",(0,i.jsxs)(t.p,{children:["Make settings in Certificate Manager tab:\n",(0,i.jsx)(t.img,{src:n(13049).Z+"",width:"1068",height:"366"})]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Step 2."})}),"\n",(0,i.jsx)(t.p,{children:"To load certificates/keys follow below steps:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:['Click "Load File" button. File explorer window will appear.\n',(0,i.jsx)(t.img,{src:n(2895).Z+"",width:"1078",height:"856"})]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:'Select file and click "Open"'}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsx)(t.p,{children:"Select original file, not the file with added AT command!"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:['Click "Save to device" button. If succesful, "Upload Complete" pop-up window will appear.\n',(0,i.jsx)(t.img,{src:n(41346).Z+"",width:"697",height:"252"})]}),"\n"]}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsx)(t.p,{children:'When saving certificate or key, "Save to device" button shall be pressed for each one.\n"Apply settings" button will NOT save certificates/keys to device.'})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Step 3."})}),"\n",(0,i.jsx)(t.p,{children:'Press "Apply settings" button to save settings made in Step 1.\nReboot device.'}),"\n",(0,i.jsx)(t.h2,{id:"results",children:"Results"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Send test message using Terminal"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(80631).Z+"",width:"1044",height:"485"})}),"\n",(0,i.jsxs)(t.ol,{start:"2",children:["\n",(0,i.jsx)(t.li,{children:'Since we subscribed to "updated" topic, when MQTT message is sent we can see reply message instantly.\nAlso it is possible to check in AWS IoT -> Manage -> Things -> Shadow or Activity'}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.img,{src:n(98835).Z+"",width:"981",height:"368"}),"\n",(0,i.jsx)(t.img,{src:n(82338).Z+"",width:"979",height:"464"})]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Congratulations"})}),"\n",(0,i.jsx)(t.p,{children:"WIZ510SSL is successfully connected to AWS!"})]})}function h(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},71105:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/DeviceManager-28ccc82fad0f0a9d4f23c2ae4ffcc40c.JPG"},82338:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/activity_check-7eefc176338b05d3b13170f5a19ccfc5.png"},94287:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/basic_settings-904aea5977cf4d9c48d88848221db8fe.png"},2895:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/certificate_load-88179bde84f02e35edec25602621eb8f.png"},13049:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/certificate_manager_settings-f8b8610d3fa9213dbd7dd485b40cbd37.png"},41346:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/certificate_saved-d8863969a228fd74cf3ad4d47bd4af60.png"},92460:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/certificate_with_command-92a8585412ed1d0a7cf122833d4f5702.png"},79321:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/mqtt_options_settings-c2f7b1222b0f5d58ce7cdcecfac93721.png"},80631:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/pub_message-d63d25d4fbd47879ad135f8e757c5673.png"},53321:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/sdk-attach-policy-5621d3efed4252fc5547ba21ca4803d1.png"},98835:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/shadow_state_check-d44a83b9dbb096eee16b54c231e1a760.png"},37739:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/yat_settings-9b7cea99ecd40bb57dbbeeb0751ffd36.png"},11151:(e,t,n)=>{n.d(t,{Z:()=>d,a:()=>r});var i=n(67294);const s={},l=i.createContext(s);function r(e){const t=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(l.Provider,{value:t},e.children)}}}]);