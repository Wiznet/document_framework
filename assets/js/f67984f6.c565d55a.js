"use strict";(self.webpackChunkwiznet_document=self.webpackChunkwiznet_document||[]).push([[24091],{56455:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>x,frontMatter:()=>r,metadata:()=>l,toc:()=>h});var s=n(85893),i=n(11151);const r={id:"mqtt-connection-guide",title:"MQTT Connection Guide",date:new Date("2022-06-28T00:00:00.000Z")},c=void 0,l={id:"Product/S2E-Module/WIZ5xxSR-RP-Series/mqtt-connection-guide",title:"MQTT Connection Guide",description:"-----",source:"@site/docs/Product/S2E-Module/WIZ5xxSR-RP-Series/mqtt-connection-guide-en.md",sourceDirName:"Product/S2E-Module/WIZ5xxSR-RP-Series",slug:"/Product/S2E-Module/WIZ5xxSR-RP-Series/mqtt-connection-guide",permalink:"/Product/S2E-Module/WIZ5xxSR-RP-Series/mqtt-connection-guide",draft:!1,unlisted:!1,editUrl:"https://github.com/Wiznet/document_framework/tree/master/docs/Product/S2E-Module/WIZ5xxSR-RP-Series/mqtt-connection-guide-en.md",tags:[],version:"current",frontMatter:{id:"mqtt-connection-guide",title:"MQTT Connection Guide",date:"2022-06-28T00:00:00.000Z"},sidebar:"docs",previous:{title:"Firmware Update Guide",permalink:"/Product/S2E-Module/WIZ5xxSR-RP-Series/firmware-update-guide"},next:{title:"SSL Connection Guide",permalink:"/Product/S2E-Module/WIZ5xxSR-RP-Series/ssl-connection-guide"}},d={},h=[{value:"WIZ5xxSR-RP MQTT Connection Overview",id:"wiz5xxsr-rp-mqtt-connection-overview",level:2},{value:"Required Hardware and Software",id:"required-hardware-and-software",level:2},{value:"Hardware",id:"hardware",level:3},{value:"Software",id:"software",level:3},{value:"How to Connect to MQTT Broker through Mosquitto",id:"how-to-connect-to-mqtt-broker-through-mosquitto",level:2},{value:"Step 1: Setup Environment to Use WIZ5xxSR-RP",id:"step-1-setup-environment-to-use-wiz5xxsr-rp",level:3},{value:"Step 2: Setup Mosquitto",id:"step-2-setup-mosquitto",level:3},{value:"Step 3: Run MQTT Broker through Mosquitto",id:"step-3-run-mqtt-broker-through-mosquitto",level:3},{value:"Step 4: Setup WIZ5xxSR-RP through WIZnet S2E Configuration Tool for MQTT Broker Connection",id:"step-4-setup-wiz5xxsr-rp-through-wiznet-s2e-configuration-tool-for-mqtt-broker-connection",level:3},{value:"Step 5: Done",id:"step-5-done",level:3},{value:"How to connect using MQTT with AWS",id:"how-to-connect-using-mqtt-with-aws",level:2},{value:"Step 1: Creating a Thing and Policy in AWS and downloading the certificate",id:"step-1-creating-a-thing-and-policy-in-aws-and-downloading-the-certificate",level:3},{value:"Step 2: Entering the certificate into the S2E module",id:"step-2-entering-the-certificate-into-the-s2e-module",level:3},{value:"Step 3: execute (Subscribe)",id:"step-3-execute-subscribe",level:3},{value:"Step 4: execute (Publish)",id:"step-4-execute-publish",level:3}];function o(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"wiz5xxsr-rp-mqtt-connection-overview",children:"WIZ5xxSR-RP MQTT Connection Overview"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"WIZ5xxSR-RP"})," supports ",(0,s.jsx)(t.strong,{children:"MQTT client"})," and ",(0,s.jsx)(t.strong,{children:"MQTTS client"})," mode."]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"required-hardware-and-software",children:"Required Hardware and Software"}),"\n",(0,s.jsx)(t.h3,{id:"hardware",children:"Hardware"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["WIZ5xxSR-RP","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/Product/S2E-Module/WIZ5xxSR-RP-Series/WIZ500SR-RP/overview",children:"WIZ500SR-RP"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/Product/S2E-Module/WIZ5xxSR-RP-Series/WIZ505SR-RP/overview",children:"WIZ505SR-RP"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/Product/S2E-Module/WIZ5xxSR-RP-Series/WIZ510SR-RP/overview",children:"WIZ510SR-RP"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.li,{children:"WIZ5xxSR-RP Evaluation Board (WIZ510SR-RP can be used without WIZ5xxSR-RP Evaluation Board.)"}),"\n",(0,s.jsx)(t.li,{children:"5V Power adapter"}),"\n",(0,s.jsx)(t.li,{children:"Cables (Ethernet / Serial)"}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"software",children:"Software"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["WIZnet S2E Configuration Tool","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://github.com/Wiznet/WIZnet-S2E-Tool-GUI/releases/tag/V1.5.0",children:"Download the Latest Version"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://github.com/Wiznet/WIZnet-S2E-Tool-GUI/releases",children:"Download the Older Versions"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://github.com/Wiznet/WIZnet-S2E-Tool-GUI",children:"GitHub Repository"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["Mosquitto:","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://mosquitto.org/download/",children:"Download Link"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"how-to-connect-to-mqtt-broker-through-mosquitto",children:"How to Connect to MQTT Broker through Mosquitto"}),"\n",(0,s.jsx)(t.p,{children:"WIZ5xxSR-RP supports MQTT client and MQTTS client mode, but this section guides how to connect to MQTT broker through Mosquitto based on MQTT client mode."}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"})," : MQTTS client mode requires additional security-related settings, unlike MQTT client mode."]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"step-1-setup-environment-to-use-wiz5xxsr-rp",children:"Step 1: Setup Environment to Use WIZ5xxSR-RP"}),"\n",(0,s.jsxs)(t.p,{children:["The process of setup environment to use the WIZ5xxSR-RP each product is available at the ",(0,s.jsx)(t.strong,{children:"'Getting Started'"})," document below."]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/Product/S2E-Module/WIZ5xxSR-RP-Series/WIZ500SR-RP/getting-started",children:"Getting Started: WIZ500SR-RP"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/Product/S2E-Module/WIZ5xxSR-RP-Series/WIZ505SR-RP/getting-started",children:"Getting Started: WIZ505SR-RP"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/Product/S2E-Module/WIZ5xxSR-RP-Series/WIZ510SR-RP/getting-started",children:"Getting Started: WIZ510SR-RP"})}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"step-2-setup-mosquitto",children:"Step 2: Setup Mosquitto"}),"\n",(0,s.jsx)(t.p,{children:"Depending on the Mosquitto version, you may need to setup Mosquitto, so refer to the below to setup."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"In Mosquitto versions earlier than 2.0 the default is to allow clients to connect without authentication."}),"\n",(0,s.jsx)(t.li,{children:"In 2.0 and up, you must choose your authentication options explicitly before clients can connect."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Therefore, if you are using version 2.0 or later, refer to following link to setup 'mosquitto.conf' in the directory where Mosquitto is installed."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://mosquitto.org/documentation/authentication-methods/",children:"Authentication Methods"})}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"step-3-run-mqtt-broker-through-mosquitto",children:"Step 3: Run MQTT Broker through Mosquitto"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"Ex>\nmosquitto -c mosquitto.conf -p 1883 -v\n"})}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(26281).Z+"",width:"962",height:"522"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"Run MQTT broker through Mosquitto"})]})})]})]}),"\n",(0,s.jsx)(t.h3,{id:"step-4-setup-wiz5xxsr-rp-through-wiznet-s2e-configuration-tool-for-mqtt-broker-connection",children:"Step 4: Setup WIZ5xxSR-RP through WIZnet S2E Configuration Tool for MQTT Broker Connection"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["Select ",(0,s.jsx)(t.strong,{children:"MQTT client"})," mode in the ",(0,s.jsx)(t.strong,{children:"Operation mode"})," setting section"]}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(70825).Z+"",width:"834",height:"722"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"Select MQTT client mode"})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"2",children:["\n",(0,s.jsxs)(t.li,{children:["Setup the ",(0,s.jsx)(t.strong,{children:"remote host IP (or URL)"})," and ",(0,s.jsx)(t.strong,{children:"remote port"})," in the ",(0,s.jsx)(t.strong,{children:"Remote host / port"})," section"]}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(63891).Z+"",width:"834",height:"722"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"Setup remote host IP and remote port"})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"3",children:["\n",(0,s.jsx)(t.li,{children:"Setup MQTT options"}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(46021).Z+"",width:"834",height:"722"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"Setup MQTT options"})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"4",children:["\n",(0,s.jsxs)(t.li,{children:["Click the ",(0,s.jsx)(t.strong,{children:"Apply Settings"})," button to save the settings"]}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(63573).Z+"",width:"834",height:"722"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"Click Apply Settings button"})]})})]})]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(46068).Z+"",width:"834",height:"722"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"Saved settings"})]})})]})]}),"\n",(0,s.jsx)(t.h3,{id:"step-5-done",children:"Step 5: Done"}),"\n",(0,s.jsx)(t.p,{children:"WIZ5xxSR-RP is successfully connected to the MQTT broker!"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(81282).Z+"",width:"834",height:"722"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"Status"})]})})]})]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(63212).Z+"",width:"963",height:"522"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"Connect to MQTT broker"})]})})]})]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"how-to-connect-using-mqtt-with-aws",children:"How to connect using MQTT with AWS"}),"\n",(0,s.jsx)(t.h3,{id:"step-1-creating-a-thing-and-policy-in-aws-and-downloading-the-certificate",children:"Step 1: Creating a Thing and Policy in AWS and downloading the certificate"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"To use AWS services, you must first log in. Please click the link below to proceed to the login page."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.a,{href:"https://aws.amazon.com/console/",children:"AWS Login Page"})})}),"\n",(0,s.jsxs)(t.ol,{start:"2",children:["\n",(0,s.jsx)(t.li,{children:'After logging in, search for "IoT console" in the search bar and click on it.'}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(75404).Z+"",width:"1092",height:"919"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:'search for "IoT console"'})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"2",children:["\n",(0,s.jsx)(t.li,{children:'Click on the "Things" tab on the left, and then press the orange "Create things" button.'}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(20384).Z+"",width:"1066",height:"924"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:'Click "create Things"'})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"3",children:["\n",(0,s.jsx)(t.li,{children:'Select "Create single thing" and then press the Next button.'}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(10733).Z+"",width:"1094",height:"636"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:'search for "IoT console"'})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"4",children:["\n",(0,s.jsx)(t.li,{children:'Enter the "Thing name" and press the Next button.'}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(6414).Z+"",width:"1053",height:"1013"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:'Enter the "Thing name"'})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"5",children:["\n",(0,s.jsx)(t.li,{children:'Select "Auto-generate a new certificate (recommended)" and press the Next button.'}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(48724).Z+"",width:"975",height:"1010"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:'Select "Device certificate"'})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"6",children:["\n",(0,s.jsx)(t.li,{children:'Next, you need to create a policy for the security of the thing. Click on "Create policy"'}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(82741).Z+"",width:"957",height:"688"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:'Click on "Create policy"'})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"7",children:["\n",(0,s.jsx)(t.li,{children:"Set the name of the policy, configure the Policy Document as shown in the picture, and then press the Create button."}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(37865).Z+"",width:"1274",height:"1014"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"Setting Policy Information"})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"8",children:["\n",(0,s.jsx)(t.li,{children:'Return to the previously opened "Create single thing" page and press the "Create thing" button.'}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(34896).Z+"",width:"1429",height:"704"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:'press the "Create thing" button'})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"9",children:["\n",(0,s.jsx)(t.li,{children:"Download all the Key & certificates."}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"![](/img/products/w232n/aws_execute/9_aws_downloading cert_key.png)"})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"Downloading all the Key & certificates"})]})})]})]}),"\n",(0,s.jsx)(t.h3,{id:"step-2-entering-the-certificate-into-the-s2e-module",children:"Step 2: Entering the certificate into the S2E module"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Enter the MQTT test client tab in AWS and copy the endpoint."}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(71308).Z+"",width:"1129",height:"965"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:'search for "IoT console"'})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"2",children:["\n",(0,s.jsx)(t.li,{children:'Turn on the configuration tool, search for the device, and set the "Basic settings" tab as follows.'}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(51821).Z+"",width:"948",height:"787"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:'setting the "Basic settings" tab of configuration tool'})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"3",children:["\n",(0,s.jsx)(t.li,{children:'Set the "MQTT options" tab as follows.'}),"\n"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"MQTT Topics Section"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Publish Topic:"})," ",(0,s.jsx)(t.code,{children:"$aws/things/my_w232n_thing/shadow/update"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Subscribe Topic:"})," ",(0,s.jsx)(t.code,{children:"$aws/things/my_w232n_thing/shadow/update/accepted"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"MQTT Options"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Client ID:"})," ",(0,s.jsx)(t.code,{children:"my_w232n_thing"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Keep-Alive:"})," ",(0,s.jsx)(t.code,{children:"60"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"QoS:"})," ",(0,s.jsx)(t.code,{children:"QoS 0"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Remote Host / Port"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Remote Host:"})," ",(0,s.jsx)(t.code,{children:"Paste the endpoint copied earlier"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Remote Port:"})," ",(0,s.jsx)(t.code,{children:"8883"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(17609).Z+"",width:"963",height:"798"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:'Setting the "MQTT options"'})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"4",children:["\n",(0,s.jsx)(t.li,{children:"Go to the Certificate Manager tab and adjust the Root CA section to match the settings shown in the picture below."}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(14630).Z+"",width:"957",height:"800"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"adjusting the Root CA section"})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"5",children:["\n",(0,s.jsx)(t.li,{children:'Press "Load file" to load the following certificate and key files:'}),"\n"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Root CA"})," : AmazonRootCA1.pem"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Client Certificate"})," : xxxxx-certificate.pem.crt"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Private Key"})," : xxxxx-private.pem.key"]}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(35652).Z+"",width:"959",height:"791"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"Load certificate and key files"})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"6",children:["\n",(0,s.jsx)(t.li,{children:'Press the "Save to device" button three times.'}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(89457).Z+"",width:"962",height:"794"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"Save certificate and key files"})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"7",children:["\n",(0,s.jsx)(t.li,{children:'Press "Apply settings"'}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(87378).Z+"",width:"1934",height:"1599"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:'Press "Apply settings"'})]})})]})]}),"\n",(0,s.jsx)(t.h3,{id:"step-3-execute-subscribe",children:"Step 3: execute (Subscribe)"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:['Return to the AWS IoT console page and click on "MQTT test client" under the "Test" section to enter. Then, enter the Publish Topic ',(0,s.jsx)(t.strong,{children:"$aws/things/my_w232n_thing/shadow/update"}),' from the MQTT Topics Section in the Configuration Tool into the "Topic filter". Press the Subscribe button.']}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(12766).Z+"",width:"1302",height:"827"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"Subscribe to a topic"})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"2",children:["\n",(0,s.jsx)(t.li,{children:"Open the USB port connected to the S2E module's UART using a serial terminal tool, and send the data."}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(98931).Z+"",width:"616",height:"537"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"Sending data"})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"3",children:["\n",(0,s.jsx)(t.li,{children:"This way, you can confirm that the MQTT communication is working correctly with AWS."}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(19239).Z+"",width:"905",height:"829"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"sucessful MQTT communication with AWS"})]})})]})]}),"\n",(0,s.jsx)(t.h3,{id:"step-4-execute-publish",children:"Step 4: execute (Publish)"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:'Return to the AWS IoT console page and click on "MQTT test client" under the "Test" section. Then, enter the Subscribe Topic $aws/things/my_w232n_thing/shadow/update/accepted from the MQTT Topics Section in the Configuration Tool into the "Topic name". Press the Publish button.'}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(45062).Z+"",width:"954",height:"570"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"Publish to a topic"})]})})]})]}),"\n",(0,s.jsxs)(t.ol,{start:"2",children:["\n",(0,s.jsx)(t.li,{children:"You can verify the data sent from AWS in the serial window."}),"\n"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"}})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{src:n(62369).Z+"",width:"619",height:"534"})})}),(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["Figure: ",(0,s.jsx)(t.strong,{children:"sucessful MQTT communication with AWS"})]})})]})]})]})}function x(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},63573:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/click_apply_settings_button-1302171badd7b45d834ac04a76629b88.png"},63212:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/connect_to_mqtt_broker-91cc3bf674c4cd5e6c8c1a6844d6eb73.png"},26281:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/run_mqtt_broker_through_mosquitto-cfef37f91d18fbda9e5f98339b435a52.png"},46068:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/saved_settings-50c5e6b4ba1dc70493e6f5122a9c2cf1.png"},70825:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/select_mqtt_client_mode-cd2e1a06f3bc768d0c2489c77fbb14e5.png"},46021:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/setup_mqtt_options-34d8455ff4f0c4ba853960af40c6967d.png"},63891:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/setup_remote_host_ip_and_remote_port-d8f86c326f2cdf10d8018e180cc9cc41.png"},81282:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/status-ed31c6222582472aeac6eeceb4308ff0.png"},71308:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/10_aws_copy_endpoint-645dfcdbdf3600fae0695ba1255f6a4a.png"},75404:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/1_aws_iot_core-ac3dfa07ece9311378eacad3b9e411d9.png"},12766:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/1_aws_sub_topic-956d19d9dead03583cdfcfa65e262b61.png"},51821:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/1_device_search-9622ac0aecc9ab984d71ca0acc01bc16.png"},17609:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/2_MQTT_option-e8486c70b95a8c523313e7d6bb7cd915.png"},20384:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/2_aws_creating_thing-fd9928f8e7e22d7079d3f37fcf1c256b.png"},98931:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/2_aws_sub_topic-11b73bbb10f64b0e1bfa1cb01f60ade4.png"},14630:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/3_MQTT_cert_key-bb6f75cac3163cf2145baf0cafb06db4.png"},10733:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/3_aws_creating_thing-90066b1c679a87159962022365704a74.png"},19239:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/3_aws_sub_topic-89835874c24deea07f8805e35d1ca5b8.png"},35652:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/4_MQTT_cert_key-1f100a7c0032352af9f6ac8d02aa35b1.png"},6414:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/4_aws_creating_thing-c071b5649d27be5df9061dc0cd872351.png"},45062:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/4_aws_pub_topic-728277ab438ce635a34b5a93134d0050.png"},89457:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/5_MQTT_cert_key-72441f012267dc4bcd3f0f787a29abda.png"},48724:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/5_aws_creating_thing-8fd4c5cc33c701d08dac15a3700b4a8f.png"},62369:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/5_aws_pub_topic-cb895639c70efa0e21a8caa56bd03ec4.png"},87378:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/6_MQTT_cert_key-a71abaa322d7a216729ad1c6e80fc4fe.png"},82741:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/6_aws_creating_policy-c1e74c26127e16b7e3393d9f7adb2f0c.png"},37865:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/7_aws_creating_policy-0a759f267766344db8b57a84f9520f0d.png"},34896:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/8_aws_combine_policy-38e44e11a1964da15fa079d825f7c7c0.png"},11151:(e,t,n)=>{n.d(t,{Z:()=>l,a:()=>c});var s=n(67294);const i={},r=s.createContext(i);function c(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);