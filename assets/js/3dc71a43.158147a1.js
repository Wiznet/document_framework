"use strict";(self.webpackChunkwiznet_document=self.webpackChunkwiznet_document||[]).push([[99864],{99820:(s,r,e)=>{e.r(r),e.d(r,{assets:()=>a,contentTitle:()=>d,default:()=>j,frontMatter:()=>l,metadata:()=>c,toc:()=>i});var t=e(85893),n=e(11151);const l={id:"flash",title:"Embedded Flash memory",date:new Date("2020-06-10T00:00:00.000Z")},d=void 0,c={id:"Product/iMCU/W7500/Peripherals-internal/flash",title:"Embedded Flash memory",description:"Flash main features",source:"@site/docs/Product/iMCU/W7500/Peripherals-internal/flash.md",sourceDirName:"Product/iMCU/W7500/Peripherals-internal",slug:"/Product/iMCU/W7500/Peripherals-internal/flash",permalink:"/Product/iMCU/W7500/Peripherals-internal/flash",draft:!1,unlisted:!1,editUrl:"https://github.com/Wiznet/document_framework/tree/master/docs/Product/iMCU/W7500/Peripherals-internal/flash.md",tags:[],version:"current",frontMatter:{id:"flash",title:"Embedded Flash memory",date:"2020-06-10T00:00:00.000Z"},sidebar:"docs",previous:{title:"External Interrupt (EXTI)",permalink:"/Product/iMCU/W7500/Peripherals-internal/exti"},next:{title:"UART Hardware Control example",permalink:"/Product/iMCU/W7500/Peripherals-internal/flowcontrol"}},a={},i=[{value:"Flash main features",id:"flash-main-features",level:2},{value:"Flash memory functional description",id:"flash-memory-functional-description",level:2},{value:"Flash memory organization",id:"flash-memory-organization",level:3}];function x(s){const r={br:"br",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,n.a)(),...s.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h2,{id:"flash-main-features",children:"Flash main features"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Up to 128Kbytes of Flash memory"}),"\n",(0,t.jsxs)(r.li,{children:["Memory organization:","\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Main Flash memory block:",(0,t.jsx)(r.br,{}),"\n","Up to 128Kbytes"]}),"\n",(0,t.jsxs)(r.li,{children:["Information block:",(0,t.jsx)(r.br,{}),"\n","Up to 512bytes",(0,t.jsx)(r.br,{}),"\n","Information block is read only"]}),"\n",(0,t.jsxs)(r.li,{children:["Data block:",(0,t.jsx)(r.br,{}),"\n","Up to 512bytes"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["Flash memory interface features:","\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Read interface with prefetch buffer( 1 x 32-bit words )"}),"\n",(0,t.jsx)(r.li,{children:"Flash Program / Erase operation"}),"\n",(0,t.jsx)(r.li,{children:"Read / Write protection"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"flash-memory-functional-description",children:"Flash memory functional description"}),"\n",(0,t.jsx)(r.h3,{id:"flash-memory-organization",children:"Flash memory organization"}),"\n",(0,t.jsx)(r.p,{children:"The Flash memory is organized of 32-bit wide memory cells that can be used for storing both code and data constants.\nThe memory organization is based on a main Flash memory block containing 512 sectors of 256byte or 32 blocks of 4Kbyte. The block and sector provides read/write protection."}),"\n",(0,t.jsxs)("table",{class:"tg",children:[(0,t.jsxs)("tr",{children:[(0,t.jsxs)("th",{class:"tg-huh2",children:["Flash area",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("th",{class:"tg-s6z2",children:["Flash memory address",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("th",{class:"tg-s6z2",children:["Size (bytes)",(0,t.jsx)("br",{}),"  "]}),(0,t.jsx)("th",{class:"tg-huh2",children:"Name"}),(0,t.jsxs)("th",{class:"tg-s6z2",children:["Description",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",rowspan:"18",children:["M",(0,t.jsx)("br",{}),"a",(0,t.jsx)("br",{}),"i",(0,t.jsx)("br",{}),"n",(0,t.jsx)("br",{})," ",(0,t.jsx)("br",{}),"F",(0,t.jsx)("br",{}),"l",(0,t.jsx)("br",{}),"a",(0,t.jsx)("br",{}),"s",(0,t.jsx)("br",{}),"h",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"  m",(0,t.jsx)("br",{}),"e",(0,t.jsx)("br",{}),"m",(0,t.jsx)("br",{}),"o",(0,t.jsx)("br",{}),"r",(0,t.jsx)("br",{}),"y",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["0x0000 0000 ~ 0x0000 00FF",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["256",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["Sector 0",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",rowspan:"6",children:["Block 0",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:["0x0000 0100 ~ 0x0000 01FF",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["256",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["Sector 1",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:["0x0000 0200 ~ 0x0000 02FF",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["256",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["Sector 2",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:[". . .",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:[". . .",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:[". . .",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:["0x0000 0E00 ~ 0x0000 0EFF",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["256",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["Sector 14",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:["0x0000 0F00 ~ 0x0000 0FFF",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["256",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["Sector 15",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:[". . .",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:[". . .",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:[". . .",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:[". . .",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:["0x0000 7000 ~ 0x0000 70FF",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["256",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["Sector128",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",rowspan:"5",children:["Block 7",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:["0x0000 7100 ~ 0x0000 71FF",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["256",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["Sector129",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:[". . .",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:[". . .",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:[". . .",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:["0x0000 7E00 ~ 0x0000 7EFF",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["256",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["Sector142",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:["0x0000 7F00 ~ 0x0000 7FFF",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["256",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["Sector143",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:[". . .",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:[". . .",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:[". . .",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:[". . .",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:["0x0001 F000 ~ 0x0001 F0FF ",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["256",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["Sector496",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",rowspan:"5",children:["Block 31",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:["0x0001 F100 ~ 0x0001 F1FF",(0,t.jsx)("br",{})]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["256",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["Sector497",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:[". . .",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:[". . .",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:[". . .",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:["0x0001 FE00 ~ 0x0001 FEFF",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["256",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["Sector510",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:["0x0001 FF00 ~ 0x0001 FFFF ",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["256",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["Sector511",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",rowspan:"2",children:[(0,t.jsx)("br",{}),"  Information",(0,t.jsx)("br",{}),"  block",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["0x0003 FC00 ~ 0x0003 FCFF",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["256",(0,t.jsx)("br",{}),"  "]}),(0,t.jsx)("td",{class:"tg-s6z2",children:(0,t.jsx)("br",{})}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["Lock info",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:["0x0003 FD00 ~ 0x0003 FDFF",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",colspan:"3",children:["Reserved",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",rowspan:"2",children:[(0,t.jsx)("br",{}),"  Data block",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["0x0003 FE00 ~ 0x0003 FEFF",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["256",(0,t.jsx)("br",{}),"  "]}),(0,t.jsx)("td",{class:"tg-s6z2"}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["Data0",(0,t.jsx)("br",{}),"  "]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{class:"tg-s6z2",children:["0x0003 FF00 ~ 0x0003 FFFF",(0,t.jsx)("br",{}),"  "]}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["256",(0,t.jsx)("br",{}),"  "]}),(0,t.jsx)("td",{class:"tg-s6z2"}),(0,t.jsxs)("td",{class:"tg-s6z2",children:["Data1",(0,t.jsx)("br",{}),"  "]})]})]}),"\n",(0,t.jsx)(r.p,{children:"The W7500 embedded Flash memory can be programmed using in-application programming.\nIAP allows the user to re-program\nthe Flash memory while the application is running.\nThe program and erase operations can be performed over the whole product voltage range."}),"\n",(0,t.jsx)(r.p,{children:"In W7500x_Library_Examples, there is the IAP Example Project and the below function is supported to use IAP."}),"\n",(0,t.jsx)(r.p,{children:"void DO_IAP( uint32_t id, uint32_t dst_addr, uint8_t* src_addr, uint32_t size);"}),"\n",(0,t.jsx)(r.p,{children:"This function requests those parameters, id, dst_addr, src_addr and size.\n'id' is already defined in 'main.c'. 'dst_addr' is the flash memory address in the upper table.\n'src_addr' is the buffer pointer user want to program. 'size' is the flash size user chooses.\nPlease refer flash address and size mentioned in the upper table."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-cpp",children:"// IAP 'id' paremeter define\n#define IAP_ENTRY           0x1FFF1001     // Because Thum code\n#define IAP_ERAS            0x010\n#define IAP_ERAS_DAT0       (IAP_ERAS + 0) // Erase Data 0 block\n#define IAP_ERAS_DAT1       (IAP_ERAS + 1) // Erase Data 1 block\n#define IAP_ERAS_SECT       (IAP_ERAS + 2) // Erase a Sector in Main Flash Memory \n#define IAP_ERAS_BLCK       (IAP_ERAS + 3) // Erase a Block in Main Flash Memory \n#define IAP_ERAS_CHIP       (IAP_ERAS + 4) // Erase all code\n#define IAP_ERAS_MASS       (IAP_ERAS + 5) // Erase all code & data\n#define IAP_PROG            0x022\n"})}),"\n",(0,t.jsx)(r.p,{children:"This is how to Erase and Program flash memory. Especially, with IAP_ERAS_DAT0 and IAP_ERAS_DAT1,\nthere is no need to put other parameters (there are default values)."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-cpp",children:"// Step 1 DATA0 Erase, Read, Write Test\nDO_IAP(IAP_ERAS_DAT0,0,0,0);\nDO_IAP(IAP_PROG,DAT0_START_ADDR,buffer,SECT_SIZE);\n"})}),"\n",(0,t.jsx)(r.p,{children:"Operating program can be deleted when user use 'IAP_ERAS_CHIP' or 'IAP_ERAS_MASS'."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-cpp",children:"// Using IAP_ERAS_CHIP or IAP_ERAS_MASS\nDO_IAP(IAP_ERAS_CHIP,0,0,0);\nDO_IAP(IAP_ERAS_MASS,0,0,0);\n"})})]})}function j(s={}){const{wrapper:r}={...(0,n.a)(),...s.components};return r?(0,t.jsx)(r,{...s,children:(0,t.jsx)(x,{...s})}):x(s)}},11151:(s,r,e)=>{e.d(r,{Z:()=>c,a:()=>d});var t=e(67294);const n={},l=t.createContext(n);function d(s){const r=t.useContext(l);return t.useMemo((function(){return"function"==typeof s?s(r):{...r,...s}}),[r,s])}function c(s){let r;return r=s.disableParentContext?"function"==typeof s.components?s.components(n):s.components||n:d(s.components),t.createElement(l.Provider,{value:r},s.children)}}}]);