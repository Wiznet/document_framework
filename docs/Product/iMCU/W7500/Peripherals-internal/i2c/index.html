<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<link rel="search" type="application/opensearchdescription+xml" title="WIZnet Document System" href="/opensearch.xml"><title data-react-helmet="true">Inter-Integrated Circuit(I2C) | WIZnet Document System</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Inter-Integrated Circuit(I2C) | WIZnet Document System"><meta data-react-helmet="true" name="description" content="Introduction"><meta data-react-helmet="true" property="og:description" content="Introduction"><meta data-react-helmet="true" property="og:url" content="https://doc.wiznet.io/docs/Product/iMCU/W7500/Peripherals-internal/i2c"><link data-react-helmet="true" rel="shortcut icon" href="/img/wizfavicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link data-react-helmet="true" rel="canonical" href="https://doc.wiznet.io/docs/Product/iMCU/W7500/Peripherals-internal/i2c"><link rel="stylesheet" href="/styles.4bb0bed0.css">
<link rel="preload" href="/styles.413cdf69.js" as="script">
<link rel="preload" href="/runtime~main.8fea6aa9.js" as="script">
<link rel="preload" href="/main.fba6c6f6.js" as="script">
<link rel="preload" href="/1.171ba466.js" as="script">
<link rel="preload" href="/2.b98f2df4.js" as="script">
<link rel="preload" href="/3.18a04464.js" as="script">
<link rel="preload" href="/1be78505.0d1935e2.js" as="script">
<link rel="preload" href="/20ac7829.e3ea8621.js" as="script">
<link rel="preload" href="/17896441.629849c2.js" as="script">
<link rel="preload" href="/c9f03152.bb9abeed.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/wiznet_logo_110x37.png" alt="My Site Logo"><strong class="navbar__title"></strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Wiznet/document_framework" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/wiznet_logo_110x37.png" alt="My Site Logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/Wiznet/document_framework" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Inter-Integrated Circuit(I2C)</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="introduction"></a>Introduction<a aria-hidden="true" tabindex="-1" class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>The <strong>I2C</strong>(Inter-Integrated Circuit) bus interface handles communications between the microcontroller and the serial I2C bus. It supports standard speed mode(100Kbps), Fast Mode(400Kbps).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="features"></a>Features<a aria-hidden="true" tabindex="-1" class="hash-link" href="#features" title="Direct link to heading">#</a></h2><ul><li>Use APB interface</li><li>Supports Slave and Master Mode</li><li>Standard mode (up to 100 KHz)</li><li>Fast mode (up to 400 KHz)</li><li>Supports 7bit Slave address mode</li><li>Start/Stop/Repeated Start detection</li><li>Start/Stop/Repeated Start/Acknowledge generation</li><li>Control the Read/Write operation</li><li>General Call enable or disable</li><li>Slave busy detection</li><li>Repeated START</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="functional-description"></a>Functional description<a aria-hidden="true" tabindex="-1" class="hash-link" href="#functional-description" title="Direct link to heading">#</a></h2><p>I2C is comprised of both master and slave functions. For proper operation, the SDA and SCL pins must be configured as open-drain signals. A I2C bus configuration is shown below Figure.</p><p><img src="/img/products/w7500p/peripheral/i2c_bus_configuration.jpg" alt="Figure 1 I2C Bus Configuration" title="Figure 1 I2C Bus Configuration"></p><p>In addition to receiving and transmitting data, this interface converts it from serial to parallel format and vice versa. The interrupt is enabled or disabled by software. The interface is connected to the I2C bus by a data pin (SDA) and by a Clock pin (SCL). It can be connected with a standard (up to 100 KHz), Fast mode (up to 400 KHz) I2C bus.</p><p><img src="/img/products/w7500p/peripheral/i2c_block_diagram.jpg" alt="Figure 2 I2C block diagram" title="Figure 2 I2C block diagram"></p><p>SDA is the bi- directions serial data line and SCL is the bi-directions serial clock line. The bus is considered idle when both lines are high. Every transaction on the I2C bus is nine bits long, consisting of eight data bits and a single acknowledge bit and data must be transferred MSB first.</p><p>###Data validity</p><p>The data on the SDA line must be stable during the HIGH period of the SCL. The HIGH or LOW state of the data line can only change when the clock signal on the SCL line is LOW (The below Figure). One clock pulse is generated for each data bit transferred.</p><p><img src="/img/products/w7500p/peripheral/i2c_data_validity.jpg" title="Figure 3 Data Validity"></p><p>###Acknowledge</p><p>All bus transactions have a required acknowledge clock cycle that is generated by the master. During the acknowledge cycle, the transmitter cannot operate the next operation.</p><p>###Bit Command Controller</p><p>The Bit command Controller handles the actual transmission of data and the generation of the specific levels for START, STOP and Repeated START signals by controlling the SCL and SDA lines. The Byte Command controller tells the Bit command Controller which operation has to be performed. For a single byte read, the Bit command Controller receives 8 separate read command. Each bit-operation is divided into 5 pieces (idle and A,B,C,and D) except for a STOP operation which is divided into 4 pieces(idle and A, B,C)</p><p><img src="/img/products/w7500p/peripheral/i2c_bit_condition.jpg" title="Figure 4 Bit Condition"></p><p>####START and STOP Conditions</p><p>The protocol of the I2C bus defines two states to START and STOP conditions.
A High to Low transition on the SDA line while SCL is High is one unique case and indicates a START condition. A Low to High transition on the SDA line while SCL is high defines a STOP condition.</p><p><img src="/img/products/w7500p/peripheral/i2c_start_stop_condition.jpg" title="Figure 5 START and STOP Conditions"></p><p>START and STOP conditions are always generated by the master.
This bus is considered to be again a certain time after the STOP condition. The bus stays busy if a Repeated START is generated instead of a STOP condition.</p><p>####RESTART Condition</p><p><img src="/img/products/w7500p/peripheral/i2c_restart_condition.jpg" title="Figure 6 RESTART Conditions"></p><p>###Slave address</p><p>The SDA line must be eight bits long.
Each byte must be followed by an Acknowledge bit. </p><p>![]<a href="https://github.com/Wiznet/img/products/w7500p/peripheral/i2c_7bit_slave_addr.jpg" target="_blank" rel="noopener noreferrer">https://github.com/Wiznet/img/products/w7500p/peripheral/i2c_7bit_slave_addr.jpg</a> &quot;Figure 7 7-bit Slave address&quot;)</p><p>###Read/Write bit</p><p>This address is seven bits followed by an eight bit which is a data direction bit(R/Â¯(&quot;W&quot; )) :
â€˜0â€™ indicates a WRITE, â€˜1â€™ indicates a READ
There are two methods of setting data direction bit by I2Cx_CTR.
The 32-bits I2Cx_CTR is reconfigured with COREEN, INTEREN, MODE, ADDR10, CTRRWN, CTREN.
CTREN bit select the R/W â€“ a â€˜Zeroâ€™ indicates the slave address bit 0, a â€˜oneâ€™ indicates a CTRRWN bit.</p><p>###Acknowledge(ACK) and Acknowledge(NACK)</p><p>The acknowledge bit takes place after every bytes. The acknowledge bit allows the receiver to signal the transmitter that the byte was successfully received and another byte may be sent. The master generates all clock pulses, including acknowledge ninth clock.</p><p>###Data transfer</p><p>The data transfer is managed through the shift, transmit data, and receive data registers.
Data transfers follow the format shown in the below Figure. After START condition, a Slave address is transmitted. If CTREN bit in the I2Cx_CTR register is enable, LSB of Slave address (bit 0) is superseded by value of CTRRWN bit in the I2Cx_CTR register.</p><p>If CTREN bit in the I2Cx_CTR register is disable, LSB of slave address is used for Read/Write operation.</p><p>###Operating Modes</p><p>The interface can operate in one of four following:</p><ul><li>Master Transmitter Mode </li><li>Master Receiver Mode</li><li>Slave Transmitter Mode</li><li>Slave Receiver Mode</li></ul><p>By default, it operates in slave mode. The interface switches from slave to master when it generates the mode bit in the I2Cx_CTR. And COREEN bit in the I2Cx_CTR must be switched from 1 to 0.</p><p><strong>In Master mode</strong><br>
Master Transmitter Mode:
In this mode, data is transmitted from master to slave before the master transmitter mode can be entered and I2Cx_CTR must be initialized   </p><p>Master Receiver Mode:
In this mode, data is received from slave to master before the master receive mode can be entered and I2Cx_CTR must be initialized    </p><p><strong>In Slave mode</strong><br>
Slave Transmitter Mode:
In this mode, data is transmitted from slave to master and setting of I2Cx_SADDR must be done. </p><p>Slave Receiver Mode:
In this mode, data is received from master to slave before the master transmitter mode can be entered and setting of I2Cx_SADDR must be done. </p><p>###Interrupts</p><p>The I2C can generate interrupt when the following conditions are observed:</p><ul><li>Start conditions on bus detected</li><li>Stop conditions on bus detected</li><li>Timeout error</li><li>Master transaction completed</li><li>Slave transaction received</li></ul><p>I2C bus have separate interrupt signals.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="master-mode"></a>Master mode<a aria-hidden="true" tabindex="-1" class="hash-link" href="#master-mode" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="initialization"></a>Initialization<a aria-hidden="true" tabindex="-1" class="hash-link" href="#initialization" title="Direct link to heading">#</a></h4><p>The below figures that follow show the command sequences available for the I2C master.</p><p><img src="/img/products/w7500p/peripheral/i2c_init_flow_chart.jpg" title="Figure 10 I2C initial setting"></p><p>The below figure shows the master operation using a 7-bit slave address.</p><p><img src="/img/products/w7500p/peripheral/i2c_tx_flow_chart.jpg" title="Figure 11 Master TRANSMIT with ADDR10=0 in the I2Cx_CTR"></p><p>below Figure shows the operation of repeated START.<br>
The repeated START operates for data read operation execution.<br>
The operation sequences are Slave address, send data, repeated START, and send data.  </p><p><img src="/img/products/w7500p/peripheral/i2c_tx_repeat_flow_chart.jpg" title="Figure 12 Master Transmit with Repeated START"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="slave-mode"></a>Slave mode<a aria-hidden="true" tabindex="-1" class="hash-link" href="#slave-mode" title="Direct link to heading">#</a></h3><p>The below Figure shows the command sequences available for the I2C slave.</p><p><img src="/img/products/w7500p/peripheral/i2c_slave_command_flow_chart.jpg" title="Figure 13 Slave Command Sequence"></p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="peripheral_examples"></a>Peripheral_Examples<a aria-hidden="true" tabindex="-1" class="hash-link" href="#peripheral_examples" title="Direct link to heading">#</a></h2><p>:!: <strong>When data read operation use,you have to use the repeat(restart condition). It use between write and read operation.</strong></p><ul><li><a href="/docs/Product/iMCU/W7500/Peripherals-internal/init">I2C Read/Write example</a></li><li><a href="/docs/Product/iMCU/W7500/Peripherals-internal/eeprom">I2C and M24CXX EEPROM communication example</a></li><li><a href="/docs/Product/iMCU/W7500/Peripherals-internal/lm75_temperature">I2C and LM75 Temperature Sensor communication example</a></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Wiznet/document_framework/tree/master/docs/Product/iMCU/W7500/Peripherals-internal/i2c.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#features" class="table-of-contents__link">Features</a></li><li><a href="#functional-description" class="table-of-contents__link">Functional description</a><ul><li><a href="#master-mode" class="table-of-contents__link">Master mode</a></li><li><a href="#slave-mode" class="table-of-contents__link">Slave mode</a></li></ul></li><li><a href="#peripheral_examples" class="table-of-contents__link">Peripheral_Examples</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction">Introduction</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://forum.wiznet.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">WIZnet Forum</a></li><li class="footer__item"><a href="http://maker.wiznet.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">WIZnet Maker</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Wiznet/document_framework" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 WIZnet Co., Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.413cdf69.js"></script>
<script src="/runtime~main.8fea6aa9.js"></script>
<script src="/main.fba6c6f6.js"></script>
<script src="/1.171ba466.js"></script>
<script src="/2.b98f2df4.js"></script>
<script src="/3.18a04464.js"></script>
<script src="/1be78505.0d1935e2.js"></script>
<script src="/20ac7829.e3ea8621.js"></script>
<script src="/17896441.629849c2.js"></script>
<script src="/c9f03152.bb9abeed.js"></script>
</body>
</html>