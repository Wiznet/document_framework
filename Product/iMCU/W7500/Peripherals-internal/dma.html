<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="search" type="application/opensearchdescription+xml" title="WIZnet Document System" href="/opensearch.xml"><title data-react-helmet="true">Direct Memory Access (DMA) | WIZnet Document System</title><meta data-react-helmet="true" property="og:url" content="https://docs.wiznet.io/Product/iMCU/W7500/Peripherals-internal/dma"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Direct Memory Access (DMA) | WIZnet Document System"><meta data-react-helmet="true" name="description" content="Introduction"><meta data-react-helmet="true" property="og:description" content="Introduction"><link data-react-helmet="true" rel="shortcut icon" href="/img/wizfavicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.wiznet.io/Product/iMCU/W7500/Peripherals-internal/dma"><link data-react-helmet="true" rel="alternate" href="https://docs.wiznet.io/Product/iMCU/W7500/Peripherals-internal/dma" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.wiznet.io/Product/iMCU/W7500/Peripherals-internal/dma" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.dd32a489.css">
<link rel="preload" href="/assets/js/runtime~main.34c2045a.js" as="script">
<link rel="preload" href="/assets/js/main.8a782823.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/wiznet_logo.svg" alt="Wiznet Company Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/wiznet_logo-white.svg" alt="Wiznet Company Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link">Documents</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/introduction">Introduction ‚û§</a></li><li><a class="dropdown__link" href="/Design-Guide/design_guide">Design Guide ‚û§</a></li><li><a class="dropdown__link" href="/VAR-Products-using-WIZnet/var_products_using_wiznet">VAR Products ‚û§</a></li></ul></div><a href="https://forum.wiznet.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.wiznet.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>WIZnet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/Wiznet/document_framework" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">‚õà</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üå§</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Products</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/">Products</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Azure Sphere Guardian Module</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">iMCU</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/imcu">iMCU</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">W7500</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/pin_assignment">Pin Assignment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/system_and_memory">System and Memory</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/interrupt_and_event">Interrupt and Event</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/power_supply">Power Supply</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/booting_sequence">Booting Sequence</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/electrical_characteristics_w7500">Electrical Characteristics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/w7500_ref_schematic">W7500 Reference Schematics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/documents_md">Documents</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/peripherals">Peripheral description and examples</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/libraries_examples">Library and Peripheral Example</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Peripherals Internal</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/adc">Analog to Digital Converter (ADC)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/afc">Alternate Function Controller (AFC)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/blink_led">GPIO Blink LED example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/capturemode">PWM Timer Mode example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/countermode">PWM Counter Mode example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/crg">Clock Reset Generator (CRG)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/deadzonegeneration">Dead-Zone generation example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/delay">Delay example (System tick timer example)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/deladhcpclient">DHCP Client for TCP/IP Offload Engine example</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/dma">Direct Memory Access (DMA)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/dmdnsclient">DNS Client for TCP/IP Offload Engine example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/eeprom">I2C and M24CXX EEPROM communication example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/exti">External Interrupt (EXTI)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/flash">Embedded Flash memory</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/flowcontrol">UART Hardware Control example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/gpio">General Purpose Input/Outputs (GPIO)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/i2c">Inter-Integrated Circuit (I2C)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/iap_example">Flash example (IAP example)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/illumination_sensor">ADC example (Illumination sensor)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/init">I2C Read/Write example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/inter">UART Interrupts example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/led_toggle">EXTI LED Toggle example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/lm75_temperature">I2C and LM75 Temperature Sensor communication example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/loopback">SSP Loopback example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/padcon">Pad Controller (PADCON)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/polling">UART Printf example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/printf">UART Polling example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/pwm">Pulse Width Modulation (PWM)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/pwmoutput">PWM Output example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/rng_ex">RNG example (Random number generation example)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/rng">Random number generator (RNG)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/sd_card_led">SSP SD card LED example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/sleep">EXTI Sleep example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/ssp">Random number generator (RNG)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/systick">System tick timer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/tcp_function">W7500 TCP Function</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/timermode">PWM Timer Mode example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/timerrun">Dual Timer TimerRun example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/toe">TCP/IP core Offload Engine (TOE)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/uart">Universal Asynchronous Receive Transmit (UART)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/wdt">Watchdog Timer (WDT)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Product/iMCU/W7500/Peripherals-internal/wdtreset">WDT Reset example</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Other Documents</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">W7500P</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">W7100</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Pre-programmed MCU</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">iEthernet</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">S2E Module</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">ioModule</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">App Module</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Wi-Fi Module</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Mbed WIZwiki Platform</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Open Source Hardware</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Obsolete</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Design Guide</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">VAR Products using WIZnet</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Direct Memory Access (DMA)</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>Direct memory access (DMA) is used in order to provide high-speed data transfer between peripherals and memory as well as memory to memory. Data can be quickly moved by DMA without any CPU actions. This keeps CPU resources free for other operations.</p><p>The DMA controller has up to 6 channels in total, each dedicated to managing memory access requests from one or more peripherals. It has an arbiter for handling the priority between DMA requests. For more details, refer to ‚ÄúPrimeCell¬Æ ŒºDMA Controller (PL230)‚Äù from the Technical Reference Manual</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="features"></a>Features<a class="hash-link" href="#features" title="Direct link to heading">#</a></h2><ul><li>6 channels</li><li>Each channel is connected to dedicated hardware DMA requests and software trigger is also supported on each channel.</li><li>Priorities between requests from the DMA channels are software programmable (2 levels consisting of high, default)</li><li>Memory-to-memory transfer (software request only)</li><li>TCP/IP-to-memory transfer (software request only)</li><li>Access to Flash, SRAM, APB and AHB peripherals as source and destination</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="functional-description"></a>Functional description<a class="hash-link" href="#functional-description" title="Direct link to heading">#</a></h2><p><img src="/assets/images/dma_block_diagram-0a7d7b2ec9d9cacc0efe364a06fe0914.jpg" title="Figure 1 DMA block diagram"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dma-request-mapping"></a>DMA request mapping<a class="hash-link" href="#dma-request-mapping" title="Direct link to heading">#</a></h3><p>The hardware requests from the peripherals (UART0, UART1, SSP0, SSP1) are simply connected to the DMA. Refer to the below Table Summary of the DMA requests for each channel which lists the DMA requests for each channel.</p><table><thead><tr><th></th><th>Channel 1</th><th>Channel 2</th><th>Channel 3</th><th>Channel 4</th><th>Channel 5</th><th>Channel 6</th></tr></thead><tbody><tr><td>Hardware request</td><td>SSP0_TX <br> SSP0_RX</td><td>SSP1_TX <br> SSP1_RX</td><td>UART0_TX <br> UART0_RX</td><td>UART1_TX <br> UART1_RX</td><td>Channel 5</td><td>Channel 6</td></tr><tr><td>Software request</td><td>Support</td><td>Support</td><td>Support</td><td>Support</td><td>Support</td><td>Support</td></tr></tbody></table><ol><li>Software request is only way to use DMA for memory-to-memory or TCP/IP-to-memory.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dma-arbitration"></a>DMA arbitration<a class="hash-link" href="#dma-arbitration" title="Direct link to heading">#</a></h3><p>The controller can be configured to perform arbitration during a DMA cycle before and after a programmable number of transfers. This reduces the latency for servicing a higher priority channel.
The controller uses four bits in the channel control data structure that configures how many AHB bus transfers occur before the controller re-arbitrates. These bits are known as the R_power bits because the value R is raised to the power of two and this determines the arbitration rate. For example, if R = 4, then the arbitration rate is 2^4, which means the controller arbitrates every 16 DMA transfers.</p><p><strong>Remark</strong>: Do not assign a low-priority channel with a large R_power value because this prevents the controller from servicing high-priority requests until it re-arbitrates.</p><p>When N &gt; 2<sup>R</sup> and is not an integer multiple of 2<sup>R</sup> then the controller always performs sequences of 2<sup>R</sup> transfers until N &lt; 2<sup>R</sup> remain to be transferred. The controller performs the remaining N transfers at the end of the DMA cycle.  </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dma-cycle-types"></a>DMA cycle types<a class="hash-link" href="#dma-cycle-types" title="Direct link to heading">#</a></h3><p>The cycle_ctrl bits in the channel control data structure contril how the DMA controller performs a cycle.</p><p>The controller uses four cycle types described in this manual:</p><ul><li>Invalid</li><li>Basic</li><li>Auto-request</li><li>Ping-pong</li></ul><p>See ARM micro DMA (PL230) documentation for additional cycle types.</p><p>For all cycle types, the controller arbitrates after 2<sup>R</sup>  DMA transfers. If a low-priority channel is set to a large 2<sup>R</sup>  value then it prevents all other channels from performing a DMA transfer until the low-priority DMA transfer completes. Therefore, the user must be cautious when setting the R_power bit in the channel_cfg data structure so that the latency for high-priority channels is not significantly increased.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="invalid-cycle"></a>Invalid cycle<a class="hash-link" href="#invalid-cycle" title="Direct link to heading">#</a></h4><p>After the controller completes a DMA cycle, it sets the cycle type to invalid to prevent it from repeating the same DMA cycle.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="basic-cycle"></a>Basic cycle<a class="hash-link" href="#basic-cycle" title="Direct link to heading">#</a></h4><p>In this mode, the controller can be configured to use either the primary or the alternate channel control data structure. After the channel is enabled and the controller receives a request for this channel, the flow for basic cycle is as below:</p><ol><li>The controller performs 2<sup>R</sup>  transfers.
If the number of transfers remaining is zero the flow continues at step 3.</li><li>The controller arbitrates:<ul><li>If a higher-priority channel is requesting service, then the controller services that channel.</li><li>If the peripheral or software signals a request to the controller, then it continues at step 1.</li></ul></li><li>The controller sets dma_done[c] signal for this channel HIGH for one system clock cycle. This indicates to the host processor that the DMA cycle is complete.</li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="auto-request-cycle"></a>Auto request cycle<a class="hash-link" href="#auto-request-cycle" title="Direct link to heading">#</a></h4><p>When the controller operates in this mode, it is only necessary to receive a single request to enable the controller to complete the entire DMA cycle. This enables a large data transfer to occur, without significantly increasing the latency for servicing higher priority requests or requiring multiple requests from the processor or peripheral.</p><p>The auto-request cycle is typically used for memory-to-memory requests. In this case, software generates the starting request for the 2^R transfers after setting up the DMA control data structure.</p><p>In this mode, the controller can be configured to use either the primary or the alternate channel control data structure. After the channel is enabled and the controller receives a request for this channel, the flow for the auto-request cycle is as below:</p><ol><li>The controller performs 2<sup>R</sup>  transfers. If the number of transfers remaining is zero the flow continues at step 3.</li><li>The controller arbitrates if there are any transfers remaining after 2<sup>R</sup>  transfers. If the current channel c has the highest priority, the cycle continues at step 1.</li><li>The controller sets dma_done[c] signal for this channel HIGH for one system clock cycle. This indicates to the host processor that the DMA cycle is complete.</li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pingpong-cycle"></a>Pingpong cycle<a class="hash-link" href="#pingpong-cycle" title="Direct link to heading">#</a></h4><p>In this mode, the controller performs a DMA cycle using one of the data structures and then performs a DMA cycle using the other data structure. The controller continues to switch between primary and alternate structures until it either reads a data structure that is invalid, or until the user reprograms the cycle_type to basic, or until the host processor disables the channel.</p><p>In ping-pong mode, the user can program or reprogram one of the two channel data structures (primary or alternate) while using the other channel data structure for the active transfer. When a transfer is done, the next transfer can be started immediately using the prepared channel data structure ‚Äì provided that a higher priority channel does not require servicing. If the user does not reprogram the channel control data structure not in use for a transfer, the cycle type remains invalid (which is the value at the end of the last transfer using that structure) and the ping-pong cycle completes.</p><p>The ping-pong cycle can be used for transfers to or from peripherals or for memory-to-memory transfers.</p><p><img src="/assets/images/dma_ping_pong-45bf67ea2c32f78cfc05242aa2007598.jpg" title="Figure 2 DMA ping pong cycle"></p><hr></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/Wiznet/document_framework/tree/master/docs/Product/iMCU/W7500/Peripherals-internal/dma.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Product/iMCU/W7500/Peripherals-internal/deladhcpclient"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ DHCP Client for TCP/IP Offload Engine example</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Product/iMCU/W7500/Peripherals-internal/dmdnsclient"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">DNS Client for TCP/IP Offload Engine example ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#features" class="table-of-contents__link">Features</a></li><li><a href="#functional-description" class="table-of-contents__link">Functional description</a><ul><li><a href="#dma-request-mapping" class="table-of-contents__link">DMA request mapping</a></li><li><a href="#dma-arbitration" class="table-of-contents__link">DMA arbitration</a></li><li><a href="#dma-cycle-types" class="table-of-contents__link">DMA cycle types</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/introduction">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://forum.wiznet.io" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>WIZnet Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="http://maker.wiznet.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>WIZnet Maker<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Wiznet/document_framework" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2021 WIZnet Co., Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.34c2045a.js"></script>
<script src="/assets/js/main.8a782823.js"></script>
</body>
</html>