<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="WIZnet Document System Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="WIZnet Document System Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="WIZnet Document System" href="/opensearch.xml"><title data-react-helmet="true">Tiny Gecko | WIZnet Document System</title><meta data-react-helmet="true" property="og:url" content="https://docs.wiznet.io/Product/Open-Source-Hardware/tinygecko"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Tiny Gecko | WIZnet Document System"><meta data-react-helmet="true" name="description" content="Tiny GECKO Starter Kit STK3300 is a prototyping and application"><meta data-react-helmet="true" property="og:description" content="Tiny GECKO Starter Kit STK3300 is a prototyping and application"><link data-react-helmet="true" rel="shortcut icon" href="/img/wizfavicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.wiznet.io/Product/Open-Source-Hardware/tinygecko"><link data-react-helmet="true" rel="alternate" href="https://docs.wiznet.io/Product/Open-Source-Hardware/tinygecko" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.wiznet.io/Product/Open-Source-Hardware/tinygecko" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.b6bec922.css">
<link rel="preload" href="/assets/js/runtime~main.f55f3f07.js" as="script">
<link rel="preload" href="/assets/js/main.5c1febd5.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/wiznet_logo.svg" alt="Wiznet Company Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/wiznet_logo-white.svg" alt="Wiznet Company Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link"></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link">Documents</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/introduction">Introduction âž¤</a></li><li><a class="dropdown__link" href="/Design-Guide/design_guide">Design Guide âž¤</a></li><li><a class="dropdown__link" href="/VAR-Products-using-WIZnet/var_products_using_wiznet">VAR Products âž¤</a></li></ul></div><a href="https://forum.wiznet.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Forum</a><a href="https://www.wiznet.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">WIZnet</a><a href="https://github.com/Wiznet/document_framework" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">â›ˆ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒ¤</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/wiznet_logo.svg" alt="Wiznet Company Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/wiznet_logo-white.svg" alt="Wiznet Company Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Documents</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/introduction">Introduction âž¤</a></li><li class="menu__list-item"><a class="menu__link" href="/Design-Guide/design_guide">Design Guide âž¤</a></li><li class="menu__list-item"><a class="menu__link" href="/VAR-Products-using-WIZnet/var_products_using_wiznet">VAR Products âž¤</a></li></ul></li><li class="menu__list-item"><a href="https://forum.wiznet.io/" target="_blank" rel="noopener noreferrer" class="menu__link">Forum</a></li><li class="menu__list-item"><a href="https://www.wiznet.io/" target="_blank" rel="noopener noreferrer" class="menu__link">WIZnet</a></li><li class="menu__list-item"><a href="https://github.com/Wiznet/document_framework" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a class="menu__link"></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Tiny Gecko</h1></header><div class="markdown"><p>Tiny GECKO Starter Kit STK3300 is a prototyping and application
development tool for the EFM32TG MCU family with the ARM Cortex-M3 CPU
core. We use EMF32TG840F32 in EFM32TG family. Its SPEC is as follows.</p><p><img src="/assets/images/tg840_spec-61a164f6f0394d6bc2fc48937a6c344d.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="features"></a>Features<a class="hash-link" href="#features" title="Direct link to heading">#</a></h4><ul><li>Advanced Energy Monitoring system for precise current tracking.</li><li>Special hardware configuration for isolation of the MCU power
domain.</li><li>Full feature USB debugger with debug out functionality.</li><li>160 segment Energy Micro LCD.</li><li><strong>20 pin expansion header</strong>. \&lt;- // To be used for interfacing
with W5500(WIZ550io) //</li><li>Breakout pads for easy access to I/O pins.</li><li>Powered by USB or CR2032 battery.</li><li>2 user buttons, 1 user LED and a touch slider.</li><li>Ambient Light sensor and inductive-capacitive metal sensor.</li><li>EFM32 Op-amp footprint.</li><li>32MHz and 32.768kHz crystal oscillators.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="hardware-layout"></a>Hardware Layout<a class="hash-link" href="#hardware-layout" title="Direct link to heading">#</a></h4><p><img src="/assets/images/tinygecko_hw_layout-8d9516fed372f84439ff3e36a6809001.png"></p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="preparation-for-adding-w5500"></a>Preparation for adding W5500<a class="hash-link" href="#preparation-for-adding-w5500" title="Direct link to heading">#</a></h2><ul><li><a href="/Product/..ioModule/WIZ550io/overview">WIZ550io</a> or <a href="/Product/Open-Source-Hardware/oshield_a">ioShileds</a></li><li>Tiny Gecko Starter Kit</li></ul><ul><li><a href="http://www.iar.com/" target="_blank" rel="noopener noreferrer">IAR Embedded Workbench for ARM</a></li><li><a href="http://www.silabs.com/products/mcu/Pages/simplicity-studio.aspx" target="_blank" rel="noopener noreferrer">Simplicity
Studio</a><ul><li>Energy Micro Library : emlib</li><li>Application notes &amp; example</li><li>Documents</li></ul></li></ul><ul><li><a href="/iMCU/W5500/driver">Download the latest ioLibrary BSD</a><ul><li>Ethernet</li><li>Internet </li></ul></li></ul><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-connect-w5500wiz550io"></a>How to connect W5500(WIZ550io)<a class="hash-link" href="#how-to-connect-w5500wiz550io" title="Direct link to heading">#</a></h2><table><thead><tr><th></th><th>TinyGecko 20Pins EXP Header (TG840F032)</th><th>W5500 (WIZ550io)</th></tr></thead><tbody><tr><td>MOSI</td><td>#4 (PD0)</td><td>#34 (J1:3)</td></tr><tr><td>MISO</td><td>#6 (PD1)</td><td>#35 (J1:4)</td></tr><tr><td>SCLK</td><td>#8 (PD2)</td><td>#33 (J1:5)</td></tr><tr><td>SCS</td><td>#10 (PD3)</td><td>#32 (J1:6)</td></tr><tr><td>UART TX</td><td>#12 (PD4)</td><td>Yours</td></tr><tr><td>UART RX</td><td>#14 (PD5)</td><td>Yours</td></tr><tr><td>Power</td><td>3.3V/VMCU/5V &amp; GND</td><td>VDD &amp; GND(J1:7-8/J2:1 &amp; J1:1-2/J2:6)</td></tr></tbody></table><p><img src="/assets/images/tg840_wiz550io-0e5840e6788d1a3b569a813eb50b9b8b.jpg"></p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="quick-start"></a>Quick Start<a class="hash-link" href="#quick-start" title="Direct link to heading">#</a></h2><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="download-iar-project-for-example-loopbackdhcpdns"></a>Download IAR project for example (Loopback/DHCP/DNS)<a class="hash-link" href="#download-iar-project-for-example-loopbackdhcpdns" title="Direct link to heading">#</a></h4><ul><li><a target="_blank" href="/img/osh/energymicro/efm32tg840f32_w5500_20131220.zip">efm32tg840f32\_w5500\_20131220.zip</a></li><li>Extract the downloaded zip file on your PC.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="install-the-latest-iolibrary-bsd"></a>Install the latest ioLibrary BSD<a class="hash-link" href="#install-the-latest-iolibrary-bsd" title="Direct link to heading">#</a></h4><ul><li>Project&#x27;s ioLibrary is <strong>empty</strong></li></ul><ul><li>Install ioLibrary<ul><li>Copy the previous downloaded ioLibrary_bsd [Ethernet] into
[ioLibrary]</li><li>Copy the previous downloaded ioLibrary_bsd [Internet] into
[ioLibrary]</li><li><img src="data:image/png;base64,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"></li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="open-project--make-image"></a>Open Project &amp; Make image<a class="hash-link" href="#open-project--make-image" title="Direct link to heading">#</a></h4><ul><li><p>Using IAR Embedded Workbench for ARM</p><ul><li>Open <strong>LoopbackTest.eww(DHCPTest.eww,DNSTest.eww)</strong> in the
project&#x27;s [iar] directory.</li><li>Make the executable image (.bin or .out)</li></ul></li><li><p><em>For more detail, refer to Tools manual provided IAR.</em></p><p>  If You want to monitor the progressing or debugging message of the project on your Terminal program,
Download the image in [iar&gt;&gt;Debug&gt;&gt;Exe]. </p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="programdownload-the-executable-image-thru-usb-j-link"></a>Program(download) the executable image thru USB J-Link<a class="hash-link" href="#programdownload-the-executable-image-thru-usb-j-link" title="Direct link to heading">#</a></h4><ul><li>Using IAR Embedded Workbench for ARM</li><li>Using AwareEnergy Commander of Simplicity Stdio </li><li><em>For more detail, Refer to Tools manual provided IAR or SiLab.</em></li></ul><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-test"></a>How to Test<a class="hash-link" href="#how-to-test" title="Direct link to heading">#</a></h2><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tiny-gecko-config"></a>Tiny Gecko Config<a class="hash-link" href="#tiny-gecko-config" title="Direct link to heading">#</a></h4><ul><li>HFCORECLOCK : 32MHz</li><li>HFPERCLCOK : 32MHz</li><li>LEUART0 : 32.768KHz<ul><li>Baud rate : 14400 (8-N-1)</li></ul></li><li>USART0 : 8MHz (// Doesn&#x27;t work well on 16MHz. Maybe connected by
noisy wire-jumper-line.//)<ul><li>For SPI interface with W5500(WIZ550io)</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="monitor--debug"></a>Monitor &amp; Debug<a class="hash-link" href="#monitor--debug" title="Direct link to heading">#</a></h4><p>Define <strong>DEBUG_MODE</strong> with one among <em>DEBUG_SWO</em> and <em>DEBUG_LEUART</em>
in [src&gt;&gt;bsp_tg840.h]</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* DEBUG MODE */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">DEBUG_NO</span><span class="token macro property">        </span><span class="token macro property expression number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">DEBUG_SWO</span><span class="token macro property">       </span><span class="token macro property expression number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">DEBUG_LEUART</span><span class="token macro property">    </span><span class="token macro property expression number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">if</span><span class="token macro property"> </span><span class="token macro property expression function" style="color:rgb(130, 170, 255)">defined</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token macro property expression">NDEBUG</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token macro property expression">    </span><span class="token macro property comment" style="color:rgb(105, 112, 152);font-style:italic">//&lt;- NDEBUG is defined by IAR tool in making release image.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">DEBUG_MODE</span><span class="token macro property">      </span><span class="token macro property expression">DEBUG_NO</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">else</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;stdio.h&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">DEBUG_MODE</span><span class="token macro property">      </span><span class="token macro property expression">DEBUG_SWO    </span><span class="token macro property comment" style="color:rgb(105, 112, 152);font-style:italic">//&lt;- For using IAR&#x27;s Terminal IO window.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//#define DEBUG_MODE      DEBUG_LEUART //&lt;- For Your serail Terminal program</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">endif</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="allocate-memory-for-internet-data"></a>Allocate Memory for Internet Data<a class="hash-link" href="#allocate-memory-for-internet-data" title="Direct link to heading">#</a></h4><p>You can adjust the memory size for Internet data in
[src&gt;&gt;bsp_tg840.h].</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* MAX DATA BUFFER SIZE */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">DATA_BUF_SIZE</span><span class="token macro property">   </span><span class="token macro property expression number" style="color:rgb(247, 140, 108)">2048</span><span class="token macro property expression">    </span><span class="token macro property comment" style="color:rgb(105, 112, 152);font-style:italic">// It is depend on Target System Memory</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="loopback"></a>Loopback<a class="hash-link" href="#loopback" title="Direct link to heading">#</a></h2><p>The loopback example runs with a TCP session and a UDP session.</p><p>First, Board and your PC should have the network config with the same
network range.<br>
If you want to modify board-side, edit the following code in
[src&gt;&gt;LB_main.c] with the same range which your PC has. If you want
to modify your PC-side, refer to <a href="/osh/cookie/ip_conf_b">IP
configuration</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><div tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">wiz_NetInfo gWIZNETINFO </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">mac </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x08</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0xdc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0xab</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0xcd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//&lt;-mac should be unique.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ip </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">192</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">168</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">123</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sn </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">255</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">255</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">255</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">gw </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">192</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">168</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dns </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dhcp </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> NETINFO_STATIC </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tcp"></a>TCP<a class="hash-link" href="#tcp" title="Direct link to heading">#</a></h4><ol><li>Connect to Board <ul><li>Using <a href="/osh/cookie/loopback_test">Hercules test program</a> or
others, try to connect to board with xxx.xxx.xxx.xxx listen port
5000.</li></ul></li><li>When connected<ul><li>send data to board </li><li>check whether the loopback data is same to what it sent before.</li></ul></li><li>When failed to connect<ul><li>Check link status.</li><li>Check ping test</li><li>Check network config.</li><li>Check the security program as virus vaccines and fire-wall on
your PC. </li></ul></li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="udp"></a>UDP<a class="hash-link" href="#udp" title="Direct link to heading">#</a></h4><ol><li>Send data<ul><li>Using <a href="/osh/cookie/loopback_test">Hercules test program</a> or
others, send to board&#x27;s xxx.xxx.xxx.xxx port 3000.</li></ul></li><li>When success<ul><li>check to the loopback data</li></ul></li><li>When fail <ul><li>Check link status.</li><li>Check ping test</li><li>Check network config.</li><li>Check the security program as virus vaccines and fire-wall on
your PC. </li></ul></li></ol><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dhcp"></a>DHCP<a class="hash-link" href="#dhcp" title="Direct link to heading">#</a></h2><p>DHCP example runs with one UDP socket. If you want the Dynamic IP
instead of static, Apply it.</p><p>To test the example,</p><ul><li>First ready to DHCP server to run on the LAN belongs to the board.</li><li>SHOULD BE set the <strong>unique</strong> MAC address to W5500&#x27;s SHAR register
before <em>DHCP_init(/)</em> call.</li></ul><p>If you want to monitor or display message of DHCP processing, Define
DEBUG_MODE in bsp_tg840.h (refer to the above description <em>&quot;How to
test&gt;&gt;Monitor &amp; Debug&quot;</em>.) and Define <strong>_DHCP_DEBUG_</strong> in
[ioLibrary&gt;&gt;Internet&gt;&gt;DHCP&gt;&gt;dhcp.h].</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @brief </span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @details If you want to display debug &amp; processing message, Define _DHCP_DEBUG_ </span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @note    If defined, it dependents on &lt;stdio.h&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//#define _DHCP_DEBUG_  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>When DHCP run in DEBUG mode, Force to be the leased time 10 seconds for
quickly testing to maintain the leased IP. The below codes are in
<em>parseDHCPMSG(/)</em> of &quot;dhcp.c&quot;.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">case</span><span class="token plain"> dhcpIPaddrLeaseTime </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      p</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      opt_len </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">p</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      dhcp_lease_time  </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">p</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      dhcp_lease_time  </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">dhcp_lease_time </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">p</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      dhcp_lease_time  </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">dhcp_lease_time </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">p</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      dhcp_lease_time  </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">dhcp_lease_time </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">p</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">ifdef</span><span class="token macro property"> </span><span class="token macro property expression">_DHCP_DEBUG_  </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      dhcp_lease_time </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// &lt;- Force to be leased time 10 secs.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">endif</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>- Reset the board for starting DHCP processing.</p><ol><li>DHCP running<ul><li>Send DISCOVER message </li><li>Receive OFFER message</li><li>Send REQUEST message</li><li>Receive ACK message (when success). But Receive NACK message or
Timeout occurred (when fail)</li></ul></li><li>When success<ul><li>If first leased IP, Call the default function or yours when
callback is registered by reg_dhcp_cbfunc(/).</li><li>For maintaining the leased IP, Send DISCOVER message every the
half of leased time.<ul><li>During this phase, If the leased IP is changed, Call the
default function or yours when callback is registered by
reg_dhcp_cbfunc(/).</li></ul></li><li>Every the leased IP, Send ARP the leased IP for checking IP
Conflict.<ul><li>When IP conflict, call the default function or yours when
callback is registered by reg_dhcp_cbfunc(/).</li></ul></li></ul></li><li>When failed<ul><li>When receiving NAK message or timeout occurred after the max
time (<strong>DHCP_WAIT_TIME</strong> X <strong>DHCP_RETRY_CNT</strong>) to wait
receive ACK or NACK message.</li><li>The default static IP configuration applied by <em>gWIZNETINFO</em> in
DHCP_main.c</li><li>Check link status of board.</li><li>Check the MAC address to be UNIQUE</li><li>Check the security program as virus vaccines and fire-wall o
your PC.</li><li>Check the DHCP server on the LAN belongs to the board.</li></ul></li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dhcp_wait_time--dhcp_retry_cnt-and-dhcp_time_handler"></a>DHCP_WAIT_TIME &amp; DHCP_RETRY_CNT And DHCP_time_handler(/)<a class="hash-link" href="#dhcp_wait_time--dhcp_retry_cnt-and-dhcp_time_handler" title="Direct link to heading">#</a></h4><p>For checking timeout to DHCP processing, Define <em>DHCP_WAIT_TIME</em> &amp;
<em>DHCP_RETRY_CNT</em> in dhcp.h and SHOULD BE register
<em>DHCP_time_handler(/)</em> in your 1s timer handler.</p><p>The below code is the max timeout 30s (10 sec * 3 retry count).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* Retry to processing DHCP */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property">  </span><span class="token macro property macro-name">MAX_DHCP_RETRY</span><span class="token macro property">          </span><span class="token macro property expression number" style="color:rgb(247, 140, 108)">2</span><span class="token macro property expression">        </span><span class="token macro property comment" style="color:rgb(105, 112, 152);font-style:italic">///&lt; Maximum retry count</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property">  </span><span class="token macro property macro-name">DHCP_WAIT_TIME</span><span class="token macro property">          </span><span class="token macro property expression number" style="color:rgb(247, 140, 108)">10</span><span class="token macro property expression">       </span><span class="token macro property comment" style="color:rgb(105, 112, 152);font-style:italic">///&lt; Wait Time 10s</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The below is example to register DHCP_time_handler(/) in DHCP_main.c</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**************************************************************************/</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @brief SysTick_Handler</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * Interrupt Service Routine for system tick counter</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> *****************************************************************************/</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">SysTick_Handler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  msTicks</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* increment counter necessary in Delay(/)*/</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">////////////////////////////////////////////////////////</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// SHOULD BE Added DHCP Timer Handler your 1s tick timer</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">msTicks </span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1000</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">DHCP_time_handler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">////////////////////////////////////////////////////////</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="register-your-callback-function"></a>Register your callback function<a class="hash-link" href="#register-your-callback-function" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/*******************************************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @ brief Call back for ip assign &amp; ip update from DHCP</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> *******************************************************/</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">my_ip_assign</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">getIPfromDHCP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gWIZNETINFO</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">getGWfromDHCP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gWIZNETINFO</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">gw</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">getSNfromDHCP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gWIZNETINFO</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">getDNSfromDHCP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gWIZNETINFO</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dns</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   gWIZNETINFO</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dhcp </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> NETINFO_DHCP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* Network initialization */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">network_init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// apply from dhcp</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">if</span><span class="token macro property"> </span><span class="token macro property expression">DEBUG_MODE </span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">!=</span><span class="token macro property expression"> DEBUG_NO</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;DHCP LEASED TIME : %d Sec.\r\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getDHCPLeasetime</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">            </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">endif</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/************************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @ brief Call back for ip Conflict</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> ************************************/</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">my_ip_conflict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">if</span><span class="token macro property"> </span><span class="token macro property expression">DEBUG_MODE </span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">!=</span><span class="token macro property expression"> DEBUG_NO</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CONFLICT IP from DHCP\r\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">endif</span><span class="token macro property">   </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//halt or reset or any...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">while</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// this example is halt.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Initialize the board</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// SHOULD BE set the UNIQUE mac before DHCP started.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">setSHAR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gWIZNETINFO</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">mac</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">DHCP_init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">SOCK_DHCP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> gDATABUF</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// if you want different action instead default ip assign, update, conflict, </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// if cbfunc == 0, act as default.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">reg_dhcp_cbfunc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">my_ip_assign</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">my_ip_assign</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">my_ip_conflict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">while</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/// your main loop</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>If any call back function is null, Call the default function in dhcp.c</p><ul><li>When <em>ip_assign</em> is null, call the <em>default_ip_assign(/)</em>. </li><li>When <em>ip_update</em> is null, call the <em>default_ip_update(/)</em>.</li><li>When <em>ip_conflict</em> is null, call the <em>default_ip_conflict(/)</em>.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-default-static-config-when-failed"></a>The Default Static Config When Failed<a class="hash-link" href="#the-default-static-config-when-failed" title="Direct link to heading">#</a></h4><p>In this example, When DCHP is failed <strong>MY_MAX_DHCP_RETRY</strong> times,
Apply the default static configuration as below. </p><blockquote></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    \#define MY\_MAX\_DHCP\_RETRY 5 //\&lt;- DHCP process is five times</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attempted.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\***\*//**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    \* @brief Default Network Information</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    wiz\_NetInfo gWIZNETINFO =</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">      {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          .mac = {0x00, 0x08, 0xdc,0x00, 0xab, 0xcd},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          .ip = {192, 168, 1, 123},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          .sn = {255,255,255,0},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          .gw = {192, 168, 1, 1},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          .dns = {0,0,0,0},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          .dhcp = NETINFO_DHCP</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      };</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dhcp_init--dhcp_run--dhcp_stop"></a>DHCP_init(/) / DHCP_run(/) / DHCP_stop(/)<a class="hash-link" href="#dhcp_init--dhcp_run--dhcp_stop" title="Direct link to heading">#</a></h4><p>DHCP_init can be called for initializing DHCP and restarting DHCP.<br>
DHCP_run(/) SHOULD BE periodically called by your main task for the
leased IP to maintain or check timeout.<br>
DHCP_stop(/) can be called when DHCP doesn&#x27;t process any more.<br>
The below code shows how to use DHCP APIs.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/*******************************/</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* WIZnet W5500 Code Examples  */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* DHCP test                   */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/*******************************/</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* Main loop */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// must be set the default mac before DHCP started.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">setSHAR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gWIZNETINFO</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">mac</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">DHCP_init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">SOCK_DHCP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> gDATABUF</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// if you want different action instead default ip assign, update, conflict, </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// if cbfunc == 0, act as default.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">reg_dhcp_cbfunc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">my_ip_assign</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">my_ip_assign</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">my_ip_conflict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  prevTick </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> msTicks</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">while</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">switch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">DHCP_run</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">case</span><span class="token plain"> DHCP_IP_ASSIGN</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">case</span><span class="token plain"> DHCP_IP_CHANGED</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* If this block empty, act with default_ip_assign &amp; default_ip_update  */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// This example calls the registered &#x27;my_ip_assign&#x27; in the two case.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Add to ...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token keyword" style="font-style:italic">break</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">case</span><span class="token plain"> DHCP_IP_LEASED</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// TO DO YOUR NETWORK APPs.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token keyword" style="font-style:italic">break</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">case</span><span class="token plain"> DHCP_FAILED</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* ===== Example pseudo code =====  */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The below code can be replaced your code or omitted.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// if omitted, retry to process DHCP</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         my_dhcp_retry</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token keyword" style="font-style:italic">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">my_dhcp_retry </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> MY_MAX_DHCP_RETRY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">if</span><span class="token macro property"> </span><span class="token macro property expression">DEBUG_MODE </span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">!=</span><span class="token macro property expression"> DEBUG_NO</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&gt;&gt; DHCP %d Failed\r\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">my_dhcp_retry</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">endif</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            my_dhcp_retry </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">DHCP_stop</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// if restart, recall DHCP_init(/)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">network_init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// apply the default static network</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token keyword" style="font-style:italic">break</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">default</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token keyword" style="font-style:italic">break</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dns"></a>DNS<a class="hash-link" href="#dns" title="Direct link to heading">#</a></h2><p>DNS example runs with one UDP socket. When you want to translate the
domain name to IP address, it is useful.</p><p>To test the example,<br>
Most of all, your board IP address SHOULD BE the public IP address to be
accessible on Internet.</p><p>If you want to monitor or display message of DNS processing, Define
DEBUG_MODE in bsp_tg840.h (refer to the above description <em>&quot;How to
test&gt;&gt;Monitor &amp; Debug&quot;.</em>) and Define _DNS_DEBUG_ in
[ioLibrary&gt;&gt;Internet&gt;&gt;DNS&gt;&gt;dns.h].</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @brief Define it for Debug &amp; Monitor DNS processing.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @note If defined, it dependents on &lt;stdio.h&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//#define _DNS_DEBUG_</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol><li>Reset the board for starting DNS processing</li><li>DNS running<ul><li>Send DNS query to DNS server</li><li>Receive DNS response from DNS server </li></ul></li><li>When success<ul><li>Available the translated IP address on your network application.</li></ul></li><li>When fail<ul><li>No DNS response from DNS server during the max wait time as
<strong>MAX_DNS_RETRY</strong> X <strong>DNS_WAIT_TIME</strong> seconds.</li><li>When DNS failed, you can retry to another DNS server.<ul><li>Typically, 1st DNS failed, Retry to 2nd DNS. </li></ul></li><li>No response from all DNS server<ul><li>Check link status of board.</li><li>Check the network configuration to access on Internet.</li><li>Check the DNS IP address to valid.</li></ul></li></ul></li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="max_dns_retry--dns_wiat_time-and-dns_time_handler"></a>MAX_DNS_RETRY &amp; DNS_WIAT_TIME and DNS_time_handler(/)<a class="hash-link" href="#max_dns_retry--dns_wiat_time-and-dns_time_handler" title="Direct link to heading">#</a></h4><p>For checking timeout to DNS processing, Define <em>MAX_DNS_RETYR</em> &amp;
<em>DNS_WAIT_TIME</em> in dns.h and SHOULD BE register <em>DNS_time_handler(/)</em>
in your 1s timer handler.</p><p>The below code is the max timeout 6s (2 retry count * 3 seconds)</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">MAX_DNS_RETRY</span><span class="token macro property">     </span><span class="token macro property expression number" style="color:rgb(247, 140, 108)">2</span><span class="token macro property expression">        </span><span class="token macro property comment" style="color:rgb(105, 112, 152);font-style:italic">///&lt; DNS query retry Count</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">DNS_WAIT_TIME</span><span class="token macro property">     </span><span class="token macro property expression number" style="color:rgb(247, 140, 108)">3</span><span class="token macro property expression">        </span><span class="token macro property comment" style="color:rgb(105, 112, 152);font-style:italic">///&lt; Wait response time. unit 1s.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The below code is example to register DNS_time_handler(/) in
DNS_main.c</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**************************************************************************/</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @brief SysTick_Handler</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * Interrupt Service Routine for system tick counter</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> *****************************************************************************/</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">SysTick_Handler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  msTicks</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* increment counter necessary in Delay(/)*/</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">////////////////////////////////////////////////////////</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// SHOULD BE Added DNS Timer Handler your 1s tick timer</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">msTicks </span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1000</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">DNS_time_handler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">////////////////////////////////////////////////////////</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dns-servers--domain-name"></a>DNS Servers &amp; Domain Name<a class="hash-link" href="#dns-servers--domain-name" title="Direct link to heading">#</a></h4><p>In this example, 1st &amp; 2nd DNS server and Domain name are as below.
<em>gWIZNETIFNO</em> SHOULD BE the public IP address to access on Internet. So
this example maybe failed until gWIZNETINFO be modified with IP address
to be accessible on Internet.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**************************************************************************/</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @brief Default Network Information</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> *****************************************************************************/</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* SHOULD BE available Network information for communicating to a DNS server */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">wiz_NetInfo gWIZNETINFO </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">mac </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x08</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0xdc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0xab</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0xcd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ip </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">192</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">168</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">123</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sn </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">255</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">255</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">255</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">gw </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">192</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">168</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dns </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">            </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Google public DNS Server</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dhcp </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> NETINFO_STATIC </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token class-name" style="color:rgb(255, 203, 107)">uint8_t</span><span class="token plain"> DNS_2nd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">168</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">126</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">63</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//secondary DNS server IP</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token class-name" style="color:rgb(255, 203, 107)">uint8_t</span><span class="token plain"> Domain_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;www.google.com&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// for example domain name</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The maximum length of domain names to be converted SHOULD BE defined by
<strong>MAX_DOMAIN_NAME</strong> in dns.h. &#x27;MAX_DOAMIN_MAME define&#x27; should be
included the number of &#x27;null&#x27; character (one) for End of String.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @brief Maximum length of your queried Domain name </span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @todo SHOULD BE defined it equal as or greater than your Domain name length + null character(1)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @note SHOULD BE careful to stack overflow because it is allocated 1.5 times as MAX_DOMAIN_NAME in stack.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property">  </span><span class="token macro property macro-name">MAX_DOMAIN_NAME</span><span class="token macro property">   </span><span class="token macro property expression number" style="color:rgb(247, 140, 108)">16</span><span class="token macro property expression">       </span><span class="token macro property comment" style="color:rgb(105, 112, 152);font-style:italic">// for example &quot;www.google.com&quot; </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dns_init--dns_run"></a>DNS_init(/) / DNS_run(/)<a class="hash-link" href="#dns_init--dns_run" title="Direct link to heading">#</a></h4><p>DNS_init(/) SHOULD be called before DHCP_run(/).<br>
DNS_run(/) can be called for translating the domain name into IP
address. This is blocked until DNS process is success or failed.<br>
The below code shows how to use DNS APIs.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><div tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* DNS client initialization */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">DNS_init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">SOCK_DNS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> gDATABUF</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* DNS processing */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ret </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">DNS_run</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gWIZNETINFO</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dns</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Domain_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Domain_IP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// try to 1st DNS</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">if</span><span class="token macro property"> </span><span class="token macro property expression">DEBUG_MODE </span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">!=</span><span class="token macro property expression"> DEBUG_NO</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&gt; 1st DNS Response\r\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">endif</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ret </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ret </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">DNS_run</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">DNS_2nd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Domain_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Domain_IP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// retry to 2nd DNS</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">if</span><span class="token macro property"> </span><span class="token macro property expression">DEBUG_MODE </span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">!=</span><span class="token macro property expression"> DEBUG_NO</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&gt; 2nd DNS Response\r\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">endif</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ret </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">if</span><span class="token macro property"> </span><span class="token macro property expression">DEBUG_MODE </span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">!=</span><span class="token macro property expression"> DEBUG_NO</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&gt; MAX_DOMAIN_NAME is too small. Should be redefined it.\r\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">endif</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      led_msTick </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">if</span><span class="token macro property"> </span><span class="token macro property expression">DEBUG_MODE </span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">!=</span><span class="token macro property expression"> DEBUG_NO</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&gt; DNS Failed\r\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">endif</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      led_msTick </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ret </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">if</span><span class="token macro property"> </span><span class="token macro property expression">DEBUG_MODE </span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">!=</span><span class="token macro property expression"> DEBUG_NO</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&gt; Translated %s to %d.%d.%d.%d\r\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">Domain_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">Domain_IP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">Domain_IP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">Domain_IP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">Domain_IP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">endif</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// TO DO</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><hr></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Wiznet/document_framework/tree/master/docs/Product/Open-Source-Hardware/tinygecko.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#preparation-for-adding-w5500" class="table-of-contents__link">Preparation for adding W5500</a></li><li><a href="#how-to-connect-w5500wiz550io" class="table-of-contents__link">How to connect W5500(WIZ550io)</a></li><li><a href="#quick-start" class="table-of-contents__link">Quick Start</a></li><li><a href="#how-to-test" class="table-of-contents__link">How to Test</a></li><li><a href="#loopback" class="table-of-contents__link">Loopback</a></li><li><a href="#dhcp" class="table-of-contents__link">DHCP</a></li><li><a href="#dns" class="table-of-contents__link">DNS</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction">Introduction</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://forum.wiznet.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">WIZnet Forum</a></li><li class="footer__item"><a href="http://maker.wiznet.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">WIZnet Maker</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Wiznet/document_framework" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 WIZnet Co., Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f55f3f07.js"></script>
<script src="/assets/js/main.5c1febd5.js"></script>
</body>
</html>